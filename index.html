<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripLove â¤ï¸</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>â¤ï¸</text></svg>">
    <link rel="stylesheet" href="css/style.css"> 
    <link rel="stylesheet" href="css/review.css"> 
</head>
<body>

    <header>
        <h1>TripLove â¤ï¸</h1>
        <p id="countdownDisplay">Memuat hitungan mundur...</p>
        
        <div class="date-control">
            <label for="tripDateInput">Pilih Tanggal Trip:</label>
            <input type="date" id="tripDateInput" name="tripDate" required>
        </div>
        
        <div class="filter-days" style="display: none;">
            <label><input type="checkbox" name="hari" value="Sabtu"> <span>Sabtu</span></label>
            <label><input type="checkbox" name="hari" value="Minggu"> <span>Minggu</span></label>
        </div>
    </header>

    <main class="container">
        
        <div class="controls">
            <div id="countDisplay" class="count-display">
                <span id="activityCount" style="display: block;">0</span> aktivitas dipilih
            </div>
            <div class="buttons-wrap">
                <button id="addIdeaBtn" class="btn secondary">Tambah Ide Baru ğŸ’¡</button>
                <button id="viewHistoryBtn" class="btn secondary">Lihat Riwayat & Review ğŸ“–</button>
            </div>
        </div>
        <div id="activityArea" class="activity-area">
            <p>Memuat ide trip...</p>
        </div>
        <div id="secretMessageArea" class="secret-message-area">
            <label for="secretMessage">Pesan Rahasia untuk Pasangan (Opsional):</label>
            <textarea id="secretMessage" placeholder="Tulis pesan manis, kejutan, atau pengingat..."></textarea>
            <button id="generateBtn" class="btn primary">Buat Karcis Trip âœ¨</button>
        </div>
    </main>

    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <h3>Tambahkan Ide Trip Baru</h3>
            <form id="ideaForm">
                <label for="ideaCategory">Mau Kemana Kitaaa?</label>
                <select id="ideaCategory" required>
                    </select>
                <input type="text" id="newCategoryInput" name="newCategory" placeholder="Nama Kategori Baru" style="display: none;" required>

                <label for="ideaSubtype" style="margin-top: 10px;">Dimana yaa enaknyaa?</label>
                <select id="ideaSubtype" required>
                    </select>
                <input type="text" id="newSubtypeInput" name="newSubtype" placeholder="Nama Subtipe Baru" style="display: none;" required>

                <label for="ideaTitle" style="margin-top: 10px;">Kasih tau dong...</label>
                <input type="text" id="ideaTitle" placeholder="Misal: Jalan-jalan ke Taman Kota">

                <label for="ideaImageInput" style="margin-top: 10px;">Foto/Gambar (Opsional)</label>
                <input type="file" id="ideaImageInput" accept="image/*">
                

                <details class="form-detail-section" style="margin-top: 15px;">
                    <summary style="cursor: pointer; font-weight: bold; color: var(--color-primary); padding: 10px 0;">
                        â• Tambah Info Detail (Opsional)
                    </summary>
                    
                    <div style="padding: 10px 0;">
                        <label for="ideaAddress">ğŸ“ Alamat Lengkap</label>
                        <input type="text" id="ideaAddress" placeholder="Jl. Contoh No. 123, Jakarta">
                        
                        <label for="ideaMapsUrl" style="margin-top: 10px;">ğŸ—ºï¸ Link Google Maps</label>
                        <input type="url" id="ideaMapsUrl" placeholder="https://maps.app.goo.gl/xxx">
                        <small style="color: var(--color-muted); display: block; margin-top: 5px;">
                            ğŸ’¡ Copy link dari Google Maps app
                        </small>
                        
                        <label for="ideaPhone" style="margin-top: 10px;">ğŸ“ No. Telepon</label>
                        <input type="tel" id="ideaPhone" placeholder="021-12345678">
                        
                        <label for="ideaOpeningHours" style="margin-top: 10px;">ğŸ• Jam Buka</label>
                        <input type="text" id="ideaOpeningHours" placeholder="10:00 - 22:00 (Setiap Hari)">
                        
                        <label for="ideaPriceRange" style="margin-top: 10px;">ğŸ’° Kisaran Harga</label>
                        <input type="text" id="ideaPriceRange" placeholder="Rp 50.000 - 150.000">
                        
                        <label for="ideaWebsite" style="margin-top: 10px;">ğŸŒ Website/Instagram</label>
                        <input type="url" id="ideaWebsite" placeholder="https://instagram.com/namatempat">
                        
                        <label for="ideaNotes" style="margin-top: 10px;">ğŸ“ Catatan</label>
                        <textarea id="ideaNotes" placeholder="Tips: Datang sore untuk sunset view yang bagus!" style="min-height: 60px;"></textarea>
                    </div>
                </details>

                <div class="modal-actions">
                    <button type="submit" class="btn primary">Simpan Ide ğŸ’¾</button>
                    <button type="button" id="cancelIdea" class="btn secondary">Batal</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="ideaDetailModal" class="modal hidden">
        <div class="modal-content">
            <button class="close-btn" id="closeDetailModal">&times;</button>
            <h3 id="detailIdeaName">Nama Ide Trip</h3>
            <img id="detailIdeaImage" src="images/placeholder.jpg" alt="Idea Photo" class="detail-header-img">

            <div id="detailRatingSummary" class="detail-rating-summary">
                </div>

            <h4>Review Pengunjung:</h4>
            <p id="noReviewsMessage" style="text-align: center; color: var(--color-muted);">Belum ada review. Jadilah yang pertama!</p>
            <div id="detailReviewList" class="review-list">
                </div>
            
            <div class="modal-actions" style="margin-top: 20px;">
                <button class="btn secondary" onclick="document.getElementById('ideaDetailModal').classList.add('hidden')">Tutup</button>
            </div>
        </div>
    </div>
    
    <div id="imageModal" class="modal hidden">
        <div class="modal-content image-zoom-content">
            <button class="close-btn" id="closeImageModal">&times;</button>
            <img id="modalImage" src="" alt="Zoomed Image">
        </div>
    </div>
        
    <div id="historyListModal" class="modal hidden">
        <div class="modal-content">
            <h2>Riwayat Trip</h2>
            <button class="close-btn" id="closeHistoryListBtn">&times;</button> 
            
            <div class="filter-history-date">
                <div class="filter-group">
                    <label for="filterStartDate">Dari Tanggal</label>
                    <input type="date" id="filterStartDate">
                </div>
                
                <div class="filter-group">
                    <label for="filterEndDate">Sampai Tanggal</label>
                    <input type="date" id="filterEndDate">
                </div>
                
                <button class="btn secondary small" id="applyHistoryFilterBtn">Terapkan Filter</button>
            </div>
            <div class="history-list-area">
                <div id="historyList">
                </div>
            </div>
        </div>
    </div>

    <div id="historyDetailModal" class="modal hidden">
        <div class="modal-content">
            <button class="close-btn" id="cancelReview">&times;</button>
            <h3 id="historyModalTitle">Detail Trip [Tanggal]</h3>
            
            <div class="secret-message-area" style="margin-bottom: 20px; padding: 10px; border: 1px dashed var(--color-primary); border-radius: 4px;">
                <p style="font-weight: bold; margin-bottom: 5px;">Pesan Rahasia Trip Ini:</p>
                <p id="historySecretMessage">Pesan rahasia.</p>
            </div>
            
            <h4>Aktivitas & Ulasan Trip:</h4>
            <div id="historyDetailList" class="history-detail-list">
                </div>
            
            <div class="modal-actions" style="margin-top: 20px;">
                <button class="btn primary" id="backToHistoryList">Kembali ke Daftar Trip</button>
            </div>
        </div>
    </div>

    <div id="ideaReviewModal" class="modal hidden">
        <div class="modal-content">
            <h3>Review Ide: <span id="reviewIdeaName">Nama Ide</span></h3>
            <form id="ideaReviewForm">
                <input type="hidden" id="reviewIdeaId">
                <input type="hidden" id="reviewTripId">

                <label>Rating Anda:</label>
                <div id="ideaReviewRatingDiv" class="star-rating">
                    </div>

                <label for="ideaReviewText">Ulasan Anda (Opsional):</label>
                <textarea id="ideaReviewText" placeholder="Bagaimana pengalaman Anda? (Maks 300 karakter)" maxlength="300"></textarea>

                <label for="ideaReviewPhotoInput" style="margin-top: 10px;">Foto Kenangan (Opsional):</label>
                <input type="file" id="ideaReviewPhotoInput" accept="image/*" multiple>
                <div id="ideaReviewPhotoPreview" style="margin-top: 10px;"></div>

                <p id="ideaReviewStatus" style="margin-top: 10px; color: var(--color-error);"></p>

                <div class="modal-actions">
                    <button type="submit" class="btn primary" id="submitIdeaReviewBtn">Kirim Review âœ¨</button>
                    <button type="button" id="cancelIdeaReview" class="btn secondary">Batal</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal Edit Info -->
    <div id="editInfoModal" class="modal hidden">
        <div class="modal-content">
            <button class="close-btn" id="closeEditInfoModal">&times;</button>
            <h3>âœï¸ Edit Informasi: <span id="editInfoIdeaName">Nama Tempat</span></h3>
            
            <form id="editInfoForm">
                <input type="hidden" id="editInfoIdeaId">
                
                <label for="editInfoAddress">ğŸ“ Alamat Lengkap</label>
                <input type="text" id="editInfoAddress" placeholder="Jl. Contoh No. 123, Jakarta">
                
                <label for="editInfoMapsUrl" style="margin-top: 10px;">ğŸ—ºï¸ Link Google Maps</label>
                <input type="url" id="editInfoMapsUrl" placeholder="https://maps.app.goo.gl/xxx">
                <small style="color: var(--color-muted); display: block; margin-top: 5px;">
                    ğŸ’¡ Copy link dari Google Maps app
                </small>
                
                <label for="editInfoPhone" style="margin-top: 10px;">ğŸ“ No. Telepon</label>
                <input type="tel" id="editInfoPhone" placeholder="021-12345678">
                
                <label for="editInfoOpeningHours" style="margin-top: 10px;">ğŸ• Jam Buka</label>
                <input type="text" id="editInfoOpeningHours" placeholder="10:00 - 22:00 (Setiap Hari)">
                
                <label for="editInfoPriceRange" style="margin-top: 10px;">ğŸ’° Kisaran Harga</label>
                <input type="text" id="editInfoPriceRange" placeholder="Rp 50.000 - 150.000">
                
                <label for="editInfoWebsite" style="margin-top: 10px;">ğŸŒ Website/Instagram</label>
                <input type="url" id="editInfoWebsite" placeholder="https://instagram.com/namatempat">
                
                <label for="editInfoNotes" style="margin-top: 10px;">ğŸ“ Catatan</label>
                <textarea id="editInfoNotes" placeholder="Tips: Datang sore untuk sunset view yang bagus!" style="min-height: 60px;"></textarea>
                
                <div class="modal-actions">
                    <button type="submit" class="btn primary">ğŸ’¾ Simpan Perubahan</button>
                    <button type="button" id="cancelEditInfo" class="btn secondary">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/history.js"></script>
</body>
</html>